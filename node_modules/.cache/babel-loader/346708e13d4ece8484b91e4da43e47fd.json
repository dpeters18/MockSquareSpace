{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Devon\\\\Downloads\\\\UserDataAPI\\\\src\\\\Components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport '../Login.css';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useLocalState } from \"../utilities/UtilityMethods\";\nimport { useUser } from \"../UserContainer\";\nimport Cookies from \"js-cookie\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [state, setState] = React.useState({\n    username: \"\",\n    password: \"\"\n  });\n  const navigate = useNavigate();\n  const [post, getPost] = useState(null);\n  const user = useUser();\n  const [userErr, setUserErr] = useState('');\n  const [passErr, setPassErr] = useState('');\n\n  function handleChange(event) {\n    const value = event.target.value;\n    setState({ ...state,\n      [event.target.name]: value\n    });\n    validateFields(state);\n  }\n\n  function validateFields(event) {\n    var val = event.target.value;\n\n    switch (val) {\n      case 'username':\n        {\n          const username_valid = val.length >= 8;\n\n          if (!username_valid) {\n            setUsernameErr(' is invalid');\n          } else {\n            setUsernameErr('');\n          }\n\n          break;\n        }\n\n      case 'password':\n        {\n          // min length is 8 and there must be at least one number.\n          const password_valid = val.length > 7 && val.match(/([a-z][A-Z]+[0-9])|([0-9]+[a-z][A-Z])/);\n\n          if (!password_valid) {\n            setPasswordErr(' is invalid');\n          } else {\n            setPasswordErr('');\n          }\n\n          break;\n        }\n\n      default:\n        {\n          break;\n        }\n    }\n  }\n\n  function setPasswordErr(word) {\n    if (word.length > 0) setPassErr(\"Password must have at least 8 characters and one number.\");\n  }\n\n  function setUsernameErr(word) {\n    if (word.length > 0) setUserErr(\"Username must have at least 8 characters.\");\n  }\n\n  function loginRequest() {\n    var request = {\n      method: \"post\",\n      url: \"http://localhost:9080/api/auth/login\",\n      withCredentials: true,\n      //this request gets the jwt\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      data: state\n    };\n    axios(request).then(() => {\n      user.setJwt(Cookies.get(\"jwt\"));\n      console.log(user.jwt);\n    }, [user.jwt]).finally(function (response) {\n      if (user.jwt) {\n        navigate(\"/profile\");\n      }\n    });\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lParent\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"txt_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"username\",\n            value: state.username,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"txt_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            value: state.password,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"button\",\n            value: \"Login\",\n            onClick: loginRequest\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"IVyCe4Wow+5DfzIghTYtGCNg6RQ=\", false, function () {\n  return [useNavigate, useUser];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","axios","useLocalState","useUser","Cookies","useNavigate","Login","state","setState","username","password","navigate","post","getPost","user","userErr","setUserErr","passErr","setPassErr","handleChange","event","value","target","name","validateFields","val","username_valid","length","setUsernameErr","password_valid","match","setPasswordErr","word","loginRequest","request","method","url","withCredentials","headers","data","then","setJwt","get","console","log","jwt","finally","response"],"sources":["C:/Users/Devon/Downloads/UserDataAPI/src/Components/Login.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport '../Login.css'\r\nimport {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useLocalState } from \"../utilities/UtilityMethods\";\r\nimport { useUser } from \"../UserContainer\";\r\nimport Cookies from \"js-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nfunction Login() {\r\n    const [state, setState] = React.useState({\r\n        username: \"\", \r\n        password: \"\"\r\n      }); \r\n    const navigate=useNavigate();\r\n    const[post,getPost]=useState(null);\r\n    const user=useUser();\r\n    const[userErr,setUserErr]=useState('');\r\n    const [passErr,setPassErr]=useState('');\r\n      function handleChange(event) {\r\n        const value = event.target.value;\r\n        setState({\r\n          ...state,\r\n          [event.target.name]: value,\r\n        });\r\n        validateFields(state);\r\n      }\r\n      function validateFields(event){\r\n        var val=event.target.value;\r\n        switch(val)\r\n        {\r\n            case 'username':\r\n                {\r\n                    const username_valid = val.length>=8;\r\n                    if (!username_valid)\r\n                    {\r\n                        setUsernameErr(' is invalid');\r\n                    }\r\n                    else \r\n                    {\r\n                        setUsernameErr('');\r\n                    }\r\n                    break;\r\n                }\r\n            case 'password':\r\n                {\r\n                    // min length is 8 and there must be at least one number.\r\n                    const password_valid = val.length >7&&val.match(/([a-z][A-Z]+[0-9])|([0-9]+[a-z][A-Z])/);\r\n                    if (!password_valid)\r\n                    {\r\n                        setPasswordErr(' is invalid');\r\n                    }\r\n                    else\r\n                    {\r\n                        setPasswordErr('');\r\n                    }\r\n                    break;\r\n                }\r\n            default: {break;}\r\n        }\r\n      }\r\n      function setPasswordErr(word){\r\n        if(word.length>0)\r\n           setPassErr(\"Password must have at least 8 characters and one number.\");\r\n      }\r\n      function setUsernameErr(word){\r\n        if(word.length>0)\r\n        setUserErr(\"Username must have at least 8 characters.\");\r\n      }\r\n      function loginRequest(){\r\n\r\n        var request={\r\n            method:\"post\",\r\n            url:\"http://localhost:9080/api/auth/login\",\r\n            withCredentials:true,                  //this request gets the jwt\r\n            headers:{\r\n                'Content-Type':'application/json'\r\n            },\r\n            data:state\r\n        };\r\n        axios(request)\r\n        .then(()=>  {user.setJwt(Cookies.get(\"jwt\"));\r\n        console.log(user.jwt);\r\n     \r\n     }, [user.jwt]).finally(function (response)\r\n     {\r\n         if(user.jwt)\r\n         {\r\n             navigate(\"/profile\");\r\n         }\r\n     });\r\n        };\r\n    return (\r\n\r\n        <div className=\"lParent\">\r\n            <div className=\"center\">\r\n\r\n                <h1>Login</h1>\r\n\r\n                <form>\r\n                    <div className=\"txt_field\">\r\n                        <input type=\"text\" name=\"username\" value={state.username} onChange={handleChange}/>\r\n                        <label>Username</label>\r\n                    </div>\r\n                    <div className=\"txt_field\">\r\n                        <input type=\"password\"  name=\"password\" value={state.password} onChange={handleChange}/>\r\n                        <label>Password</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"button\" value=\"Login\" onClick={loginRequest}/>\r\n                    </div>\r\n                </form>     \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}